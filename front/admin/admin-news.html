<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ระบบจัดการข่าวสาร - โรงพยาบาลส่งเสริมสุขภาพตำบลลางา">
    <link rel="icon" href="/asset/img/favicon.ico" sizes="32x32">
    <script src="https://cdn.tailwindcss.com"></script>
    <title>ระบบจัดการข่าวสาร - โรงพยาบาลส่งเสริมสุขภาพตำบลลางา</title>
    <style>
        * {
            font-family: 'Sarabun', sans-serif;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .admin-header {
            background-color: #0d5aaf;
            color: white;
            padding: 15px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .admin-title {
            font-size: 24px;
            font-weight: bold;
        }

        .admin-user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            background-color: #fff;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #0d5aaf;
            font-weight: bold;
            font-size: 16px;
        }

        .admin-logout {
            background-color: #ff6347;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s;
        }

        .admin-logout:hover {
            background-color: #e53e3e;
        }

        .admin-tabs {
            display: flex;
            border-bottom: 1px solid #ddd;
            margin-bottom: 20px;
        }

        .tab-btn {
            padding: 10px 20px;
            border: none;
            background: none;
            cursor: pointer;
            font-size: 16px;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }

        .tab-btn.active {
            border-bottom: 3px solid #0d5aaf;
            color: #0d5aaf;
            font-weight: bold;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #444;
        }

        .form-input,
        .form-textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
        }

        .form-textarea {
            min-height: 150px;
            resize: vertical;
        }

        .btn {
            display: inline-block;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .btn-primary {
            background-color: #0d5aaf;
            color: white;
        }

        .btn-primary:hover {
            background-color: #0a4c94;
        }

        .btn-danger {
            background-color: #ff6347;
            color: white;
        }

        .btn-danger:hover {
            background-color: #e53e3e;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        th {
            background-color: #f2f2f2;
            font-weight: bold;
        }

        .action-btns {
            display: flex;
            gap: 10px;
        }

        .preview-container {
            background-color: #f5f5f5;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
        }

        .image-preview {
            width: 100%;
            height: 200px;
            border: 1px dashed #ddd;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #f9f9f9;
            overflow: hidden;
        }

        .image-preview img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }

        .alert {
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 20px;
            display: none;
        }

        .alert-success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .alert-error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .file-input-container {
            position: relative;
        }

        .file-input-label {
            display: inline-block;
            padding: 10px 15px;
            background-color: #f2f2f2;
            border: 1px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 5px;
        }

        .file-input {
            position: absolute;
            left: 0;
            top: 0;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }

        .file-name {
            margin-left: 10px;
            font-style: italic;
        }

        .pagination {
            display: flex;
            justify-content: center;
            margin-top: 20px;
            gap: 5px;
        }

        .pagination button {
            padding: 8px 12px;
            border: 1px solid #ddd;
            background-color: white;
            cursor: pointer;
            border-radius: 4px;
        }

        .pagination button.active {
            background-color: #0d5aaf;
            color: white;
            border-color: #0d5aaf;
        }

        /* Login Page Styles */
        .login-container {
            max-width: 400px;
            margin: 100px auto;
            padding: 30px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .login-logo {
            text-align: center;
            margin-bottom: 30px;
        }

        .login-logo img {
            max-width: 150px;
            height: auto;
        }

        .login-title {
            font-size: 24px;
            font-weight: bold;
            color: #0d5aaf;
            text-align: center;
            margin-bottom: 20px;
        }

        .login-input {
            width: 100%;
            padding: 12px;
            margin-bottom: 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
        }

        .login-btn {
            width: 100%;
            padding: 12px;
            background-color: #0d5aaf;
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .login-btn:hover {
            background-color: #0a4c94;
        }

        .login-footer {
            text-align: center;
            margin-top: 20px;
            font-size: 14px;
            color: #666;
        }

        .login-error {
            background-color: #f8d7da;
            color: #721c24;
            padding: 10px;
            border-radius: 4px;
            margin-bottom: 15px;
            display: none;
        }
    </style>
</head>

<body>
    <!-- Login Page -->
    <div class="login-container" id="loginPage">
        <div class="login-logo">
            <img src="/api/placeholder/150/150" alt="โรงพยาบาลส่งเสริมสุขภาพตำบลลางา">
        </div>
        <div class="login-title">เข้าสู่ระบบจัดการข่าวสาร</div>
        <div class="login-error" id="loginError">ชื่อผู้ใช้หรือรหัสผ่านไม่ถูกต้อง</div>
        <form id="loginForm">
            <input type="text" class="login-input" id="username" placeholder="ชื่อผู้ใช้" required>
            <input type="password" class="login-input" id="password" placeholder="รหัสผ่าน" required>
            <button type="submit" class="login-btn">เข้าสู่ระบบ</button>
        </form>
        <div class="login-footer">
            โรงพยาบาลส่งเสริมสุขภาพตำบลลางา<br>
            อำเภอมายอ จังหวัดปัตตานี
        </div>
    </div>

    <!-- Admin Dashboard -->
    <div class="container" id="adminDashboard" style="display: none;">
        <!-- Admin Header -->
        <div class="admin-header">
            <div class="admin-title">ระบบจัดการข่าวสาร - โรงพยาบาลส่งเสริมสุขภาพตำบลลางา</div>
            <div class="admin-user-info">
                <div class="user-avatar" id="userAvatar">U</div>
                <span id="welcomeMessage">ยินดีต้อนรับ, User</span>
                <button class="admin-logout" id="logoutBtn">ออกจากระบบ</button>
            </div>
        </div>

        <!-- Alert Messages -->
        <div class="alert alert-success" id="successAlert">บันทึกข้อมูลเรียบร้อยแล้ว</div>
        <div class="alert alert-error" id="errorAlert">เกิดข้อผิดพลาด กรุณาลองใหม่อีกครั้ง</div>

        <!-- Admin Tabs -->
        <div class="admin-tabs">
            <button class="tab-btn active" data-tab="add-news">เพิ่มข่าวใหม่</button>
            <button class="tab-btn" data-tab="manage-news">จัดการข่าวสาร</button>
        </div>

        <!-- Add News Tab -->
        <div class="tab-content active" id="add-news">
            <form id="addNewsForm">
                <div class="form-group">
                    <label class="form-label">หัวข้อข่าว</label>
                    <input type="text" class="form-input" id="newsTitle" required>
                </div>

                <div class="form-group">
                    <label class="form-label">รูปภาพประกอบข่าว</label>
                    <div class="image-preview" id="imagePreview">
                        <span id="previewPlaceholder">ตัวอย่างรูปภาพจะแสดงที่นี่</span>
                    </div>
                    <div class="file-input-container">
                        <label class="file-input-label">
                            เลือกรูปภาพ
                            <input type="file" class="file-input" id="newsImage" accept="image/*">
                        </label>
                        <span class="file-name" id="fileName"></span>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">คำอธิบายรูปภาพ (Alt Text)</label>
                    <input type="text" class="form-input" id="imageAlt">
                </div>

                <div class="form-group">
                    <label class="form-label">เนื้อหาข่าว</label>
                    <textarea class="form-textarea" id="newsContent" required></textarea>
                </div>

                <div class="form-group">
                    <button type="submit" class="btn btn-primary">บันทึกข่าวสาร</button>
                </div>
            </form>

            <div class="preview-container">
                <h3 class="text-xl font-bold mb-4">ตัวอย่างการแสดงผล</h3>
                <div class="news-slide active">
                    <div class="news-image">
                        <img id="previewImage" src="/api/placeholder/600/400" alt="ตัวอย่างรูปภาพ">
                    </div>
                    <div class="news-content">
                        <h3 id="previewTitle">หัวข้อข่าวตัวอย่าง</h3>
                        <p id="previewContent">เนื้อหาข่าวตัวอย่าง</p>
                        <a href="#" class="read-more">อ่านเพิ่มเติม</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Manage News Tab -->
        <div class="tab-content" id="manage-news">
            <h2 class="text-xl font-bold mb-4">รายการข่าวสารทั้งหมด</h2>
            
            <table>
                <thead>
                    <tr>
                        <th style="width: 5%;">ลำดับ</th>
                        <th style="width: 15%;">รูปภาพ</th>
                        <th style="width: 25%;">หัวข้อข่าว</th>
                        <th style="width: 35%;">เนื้อหา</th>
                        <th style="width: 20%;">การจัดการ</th>
                    </tr>
                </thead>
                <tbody id="newsTable">
                    <tr>
                        <td>1</td>
                        <td><img src="/asset/img/20230524063300-checkup06.png" alt="กิจกรรมตรวจสุขภาพประจำปี" style="max-height: 60px;"></td>
                        <td>กิจกรรมตรวจสุขภาพประจำปี 2567</td>
                        <td>โรงพยาบาลส่งเสริมสุขภาพตำบลลางาจัดกิจกรรมตรวจสุขภาพ...</td>
                        <td class="action-btns">
                            <button class="btn btn-primary edit-btn" data-id="1">แก้ไข</button>
                            <button class="btn btn-danger delete-btn" data-id="1">ลบ</button>
                        </td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td><img src="/asset/img/LINE_ALBUM_ผ้าพื้นเมือง_250222_2 (1).jpg" alt="โครงการให้ความรู้สุขภาพ" style="max-height: 60px;"></td>
                        <td>โครงการให้ความรู้สุขภาพในโรงเรียน</td>
                        <td>ทีมบุคลากรของเราได้ลงพื้นที่ให้ความรู้เรื่องสุขอนามัย...</td>
                        <td class="action-btns">
                            <button class="btn btn-primary edit-btn" data-id="2">แก้ไข</button>
                            <button class="btn btn-danger delete-btn" data-id="2">ลบ</button>
                        </td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td><img src="/api/placeholder/600/400" alt="การอบรมการปฐมพยาบาลเบื้องต้น" style="max-height: 60px;"></td>
                        <td>การอบรมการปฐมพยาบาลเบื้องต้น</td>
                        <td>จัดอบรมให้ความรู้เกี่ยวกับการปฐมพยาบาลเบื้องต้นแก่...</td>
                        <td class="action-btns">
                            <button class="btn btn-primary edit-btn" data-id="3">แก้ไข</button>
                            <button class="btn btn-danger delete-btn" data-id="3">ลบ</button>
                        </td>
                    </tr>
                </tbody>
            </table>

            <div class="pagination">
                <button class="active">1</button>
                <button>2</button>
                <button>3</button>
                <button>▶</button>
            </div>
        </div>
    </div>

    <!-- Modal for Edit News -->
    <div id="editModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); z-index: 1000;">
        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background-color: white; padding: 20px; border-radius: 8px; width: 80%; max-width: 800px; max-height: 90vh; overflow-y: auto;">
            <h2 class="text-xl font-bold mb-4">แก้ไขข่าวสาร</h2>
            <form id="editNewsForm">
                <input type="hidden" id="editNewsId">
                <div class="form-group">
                    <label class="form-label">หัวข้อข่าว</label>
                    <input type="text" class="form-input" id="editNewsTitle" required>
                </div>

                <div class="form-group">
                    <label class="form-label">รูปภาพประกอบข่าว</label>
                    <div class="image-preview" id="editImagePreview">
                        <img id="currentEditImage" src="" alt="">
                    </div>
                    <div class="file-input-container">
                        <label class="file-input-label">
                            เปลี่ยนรูปภาพ
                            <input type="file" class="file-input" id="editNewsImage" accept="image/*">
                        </label>
                        <span class="file-name" id="editFileName"></span>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">คำอธิบายรูปภาพ (Alt Text)</label>
                    <input type="text" class="form-input" id="editImageAlt">
                </div>

                <div class="form-group">
                    <label class="form-label">เนื้อหาข่าว</label>
                    <textarea class="form-textarea" id="editNewsContent" required></textarea>
                </div>

                <div class="form-group">
                    <button type="submit" class="btn btn-primary">บันทึกการแก้ไข</button>
                    <button type="button" class="btn btn-danger" id="cancelEdit">ยกเลิก</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Valid users
        const validUsers = [
            { username: 'langa1', password: 'langa999' },
            { username: 'langa2', password: 'langa999' },
            { username: 'langa3', password: 'langa999' },
            { username: 'langa4', password: 'langa999' },
            { username: 'langa5', password: 'langa999' }
        ];

        // Check if user is logged in
        function checkLoginStatus() {
            const currentUser = localStorage.getItem('currentUser');
            if (currentUser) {
                showAdminDashboard(currentUser);
            } else {
                showLoginPage();
            }
        }

        // Show login page
        function showLoginPage() {
            document.getElementById('loginPage').style.display = 'block';
            document.getElementById('adminDashboard').style.display = 'none';
        }

        // Show admin dashboard
        function showAdminDashboard(username) {
            document.getElementById('loginPage').style.display = 'none';
            document.getElementById('adminDashboard').style.display = 'block';
            
            // Set welcome message and avatar
            document.getElementById('welcomeMessage').textContent = 'ยินดีต้อนรับ, ' + username;
            document.getElementById('userAvatar').textContent = username.charAt(0).toUpperCase();
        }

        // Login form submission
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            // Check credentials
            const user = validUsers.find(user => user.username === username && user.password === password);
            
            if (user) {
                // Store login status in localStorage
                localStorage.setItem('currentUser', username);
                showAdminDashboard(username);
            } else {
                document.getElementById('loginError').style.display = 'block';
            }
        });

        // Logout button
        document.getElementById('logoutBtn').addEventListener('click', function() {
            if (confirm('คุณต้องการออกจากระบบใช่หรือไม่?')) {
                // Clear login status
                localStorage.removeItem('currentUser');
                showLoginPage();
            }
        });

        // Function to handle tab switching
        document.querySelectorAll('.tab-btn').forEach(button => {
            button.addEventListener('click', () => {
                // Remove active class from all tabs
                document.querySelectorAll('.tab-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                document.querySelectorAll('.tab-content').forEach(content => {
                    content.classList.remove('active');
                });

                // Add active class to clicked tab
                button.classList.add('active');
                document.getElementById(button.dataset.tab).classList.add('active');
            });
        });

        // Image preview for new news
        document.getElementById('newsImage').addEventListener('change', function(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const img = document.createElement('img');
                    img.src = e.target.result;
                    const imagePreview = document.getElementById('imagePreview');
                    imagePreview.innerHTML = '';
                    imagePreview.appendChild(img);
                    document.getElementById('previewImage').src = e.target.result;
                    document.getElementById('fileName').textContent = file.name;
                }
                reader.readAsDataURL(file);
            }
        });

        // Live preview for title and content
        document.getElementById('newsTitle').addEventListener('input', function() {
            document.getElementById('previewTitle').textContent = this.value || 'หัวข้อข่าวตัวอย่าง';
        });

        document.getElementById('newsContent').addEventListener('input', function() {
            document.getElementById('previewContent').textContent = this.value || 'เนื้อหาข่าวตัวอย่าง';
        });

        // Form submission for adding news
        document.getElementById('addNewsForm').addEventListener('submit', function(e) {
            e.preventDefault();
            // In a real application, you would send the form data to the server here
            // For this example, we'll just show a success message
            document.getElementById('successAlert').style.display = 'block';
            setTimeout(() => {
                document.getElementById('successAlert').style.display = 'none';
            }, 3000);
            this.reset();
            document.getElementById('imagePreview').innerHTML = '<span id="previewPlaceholder">ตัวอย่างรูปภาพจะแสดงที่นี่</span>';
            document.getElementById('previewImage').src = '/api/placeholder/600/400';
            document.getElementById('previewTitle').textContent = 'หัวข้อข่าวตัวอย่าง';
            document.getElementById('previewContent').textContent = 'เนื้อหาข่าวตัวอย่าง';
            document.getElementById('fileName').textContent = '';
        });

        // Handle edit button clicks
        document.querySelectorAll('.edit-btn').forEach(button => {
            button.addEventListener('click', function() {
                const newsId = this.dataset.id;
                const modal = document.getElementById('editModal');
                modal.style.display = 'block';
                
                // In a real application, you would fetch the news data from the server
                // For this example, we'll use hardcoded data based on the ID
                let title, content, imgSrc, imgAlt;
                
                if (newsId === '1') {
                    title = 'กิจกรรมตรวจสุขภาพประจำปี 2567';
                    content = 'โรงพยาบาลส่งเสริมสุขภาพตำบลลางาจัดกิจกรรมตรวจสุขภาพประจำปีให้แก่ประชาชนในชุมชน โดยมีการตรวจคัดกรองโรคเบาหวาน ความดันโลหิตสูง มะเร็งลำไส้ มะเร็งปากมดลูก มะเร็งเต้านม ไวรัสตับอักเสพบีและซี และให้คำปรึกษาด้านสุขภาพ ตรวจพัฒนาการเด็ก 0-5 ปี ตรวจคัดกรองผู้สูงอายุ (ADL)';
                    imgSrc = '/asset/img/20230524063300-checkup06.png';
                    imgAlt = 'กิจกรรมตรวจสุขภาพประจำปี';
                } else if (newsId === '2') {
                    title = 'โครงการให้ความรู้สุขภาพในโรงเรียน';
                    content = 'ทีมบุคลากรของเราได้ลงพื้นที่ให้ความรู้เรื่องสุขอนามัยและการดูแลสุขภาพแก่นักเรียนในโรงเรียนเขตอำเภอมายอ';
                    imgSrc = '/asset/img/LINE_ALBUM_ผ้าพื้นเมือง_250222_2 (1).jpg';
                    imgAlt = 'โครงการให้ความรู้สุขภาพ';
                } else {
                    title = 'การอบรมการปฐมพยาบาลเบื้องต้น';
                    content = 'จัดอบรมให้ความรู้เกี่ยวกับการปฐมพยาบาลเบื้องต้นแก่อาสาสมัครสาธารณสุขประจำหมู่บ้าน เพื่อเพิ่มทักษะการช่วยเหลือในภาวะฉุกเฉิน';
                    imgSrc = '/api/placeholder/600/400';
                    imgAlt = 'การอบรมการปฐมพยาบาลเบื้องต้น';
                }
                
                document.getElementById('editNewsId').value = newsId;
                document.getElementById('editNewsTitle').value = title;
                document.getElementById('editNewsContent').value = content;
                document.getElementById('editImageAlt').value = imgAlt;
                document.getElementById('currentEditImage').src = imgSrc;
                document.getElementById('currentEditImage').alt = imgAlt;
            });
        });

        // Handle cancel edit button
        document.getElementById('cancelEdit').addEventListener('click', function() {
            document.getElementById('editModal').style.display = 'none';
        });

        // Image preview for edit form
        document.getElementById('editNewsImage').addEventListener('change', function(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const img = document.createElement('img');
                    img.src = e.target.result;
                    document.getElementById('editImagePreview').innerHTML = '';
                    document.getElementById('editImagePreview').appendChild(img);
                    document.getElementById('currentEditImage').src = e.target.result;
                    document.getElementById('editFileName').textContent = file.name;
                }
                reader.readAsDataURL(file);
            }
        });

        // Form submission for edit news
        document.getElementById('editNewsForm').addEventListener('submit', function(e) {
            e.preventDefault();
            // In a real application, you would send the form data to the server here
            // For this example, we'll just show a success message and close the modal
            document.getElementById('successAlert').style.display = 'block';
            setTimeout(() => {
                document.getElementById('successAlert').style.display = 'none';
            }, 3000);
            document.getElementById('editModal').style.display = 'none';
        });

        // Handle delete button clicks
        document.querySelectorAll('.delete-btn').forEach(button => {
            button.addEventListener('click', function() {
                const newsId = this.dataset.id;
                if (confirm('คุณต้องการลบข่าวนี้ใช่หรือไม่?')) {
                    // In a real application, you would delete the news from the server here
                    // For this example, we'll just show a success message
                    document.getElementById('successAlert').style.display = 'block';
                    setTimeout(() => {
                        document.getElementById('successAlert').style.display = 'none';
                    }, 3000);
                }
            });
        });

        // Function to show success alert
        function showSuccessAlert(message) {
            const successAlert = document.getElementById('successAlert');
            successAlert.textContent = message || 'บันทึกข้อมูลเรียบร้อยแล้ว';
            successAlert.style.display = 'block';
            setTimeout(() => {
                successAlert.style.display = 'none';
            }, 3000);
        }

        // Function to show error alert
        function showErrorAlert(message) {
            const errorAlert = document.getElementById('errorAlert');
            errorAlert.textContent = message || 'เกิดข้อผิดพลาด กรุณาลองใหม่อีกครั้ง';
            errorAlert.style.display = 'block';
            setTimeout(() => {
                errorAlert.style.display = 'none';
            }, 3000);
        }

        // Pagination buttons
        document.querySelectorAll('.pagination button').forEach(button => {
            button.addEventListener('click', function() {
                document.querySelectorAll('.pagination button').forEach(btn => {
                    btn.classList.remove('active');
                });
                this.classList.add('active');
                // In a real application, you would fetch the news data for the selected page
            });
        });

        // Click outside modal to close
        window.addEventListener('click', function(event) {
            const modal = document.getElementById('editModal');
            if (event.target === modal) {
                modal.style.display = 'none';
            }
        });

        // Check login status when page loads
        document.addEventListener('DOMContentLoaded', function() {
            checkLoginStatus();
        });

        // Add session timeout for security (auto logout after 30 minutes of inactivity)
        let inactivityTimer;

        function resetInactivityTimer() {
            clearTimeout(inactivityTimer);
            inactivityTimer = setTimeout(function() {
                // Auto logout after 30 minutes of inactivity
                if (localStorage.getItem('currentUser')) {
                    localStorage.removeItem('currentUser');
                    showLoginPage();
                    alert('คุณถูกออกจากระบบเนื่องจากไม่มีการใช้งานเป็นเวลานาน');
                }
            }, 30 * 60 * 1000); // 30 minutes
        }

        // Reset inactivity timer on user activity
        ['click', 'keypress', 'mousemove', 'touchstart'].forEach(function(event) {
            document.addEventListener(event, resetInactivityTimer);
        });

        // Initialize inactivity timer
        resetInactivityTimer();

        function getUser() {
            const user = async 

            
        }
    </script>
</body>
</html>